# 沙子俄罗斯方块 (Sand Tetris)

一个创新的俄罗斯方块游戏，将经典方块玩法与真实沙子物理模拟完美结合。当方块落地后，它们会转化为沙粒，遵循重力和流动规律，创造出前所未有的游戏体验。

## 🎮 在线体验

<!-- 在线体验地址将在部署后更新 -->
*在线体验地址即将上线...*

## 📸 游戏截图

<!-- 游戏截图将在完成后添加 -->
*游戏截图即将添加...*

## ✨ 核心特性

### 🏗️ 经典俄罗斯方块
- 支持7种标准方块类型（I、O、T、L、J、S、Z）
- 随机生成方块类型、颜色和初始旋转角度
- 流畅的方块控制和旋转系统

### 🌊 创新沙子物理系统
- **真实重力模拟**：方块落地后转化为沙粒，遵循物理重力规律
- **自然流动效果**：沙子会向下流动，遇到障碍物时向两侧扩散
- **边界智能处理**：在游戏区域边缘时，沙子只能向内侧流动
- **逐像素精确**：每个沙粒都是独立的物理对象

### 🎯 独特消除机制
- **连通性消除**：当同色沙子形成连通区域并同时接触左右边界时触发消除
- **Flood Fill算法**：使用8方向连通性检测，确保消除判定准确
- **视觉反馈**：消除时沙子会闪烁30帧后消失

### 🎨 精美视觉效果
- **像素艺术风格**：致敬经典游戏美学
- **动态颜色系统**：4种鲜艳颜色，视觉效果丰富
- **流畅动画**：60FPS渲染，确保游戏体验流畅

## 🎮 操作说明

### 基础控制
- **← →** 方向键：左右移动方块
- **↓** 方向键：快速下落（硬降落）
- **X** 键：顺时针旋转方块
- **C** 键：逆时针旋转方块

### 游戏控制
- **ESC** 键：暂停/继续游戏
- **空格** 键：暂停/继续游戏（备用）

### 移动设备支持
- **滑动操作**：左右滑动移动方块，向下滑动快速下落
- **双击屏幕**：旋转方块

## 🚀 本地运行方式

### 方式一：直接运行
1. 克隆或下载项目到本地
```bash
git clone [项目地址]
cd sand-tetris
```

2. 使用任意HTTP服务器运行
```bash
# 使用Python内置服务器
python -m http.server 8000

# 或使用Node.js的http-server
npx http-server

# 或使用PHP内置服务器
php -S localhost:8000
```

3. 在浏览器中访问 `http://localhost:8000`

### 方式二：直接打开
由于游戏使用纯前端技术，也可以直接在浏览器中打开 `index.html` 文件运行。

## 🛠️ 技术实现

### 核心技术栈
- **HTML5 Canvas**：游戏渲染引擎
- **原生JavaScript**：游戏逻辑实现
- **CSS3**：界面样式设计

### 架构设计
- **Display类**：二维数组显示系统，管理每个像素位置的对象
- **Particle/Sand类**：沙粒物理系统，实现重力和流动逻辑
- **Figure/Block类**：方块系统，处理生成、移动、旋转和碰撞
- **Game类**：游戏主控制器，管理游戏状态和循环

### 物理算法
```javascript
// 沙子移动的核心逻辑
update() {
    // 1. 检查下方、左下、右下三个位置
    // 2. 优先直接下落
    // 3. 下方被占用时尝试侧向流动
    // 4. 边界特殊处理
    // 5. 三个方向都被占用时停止移动
}
```

### 消除算法
```javascript
// 使用Flood Fill算法检测连通区域
waveAlgorithm(startX, startY) {
    // 1. 从起始点开始广度优先搜索
    // 2. 检查8个方向的同色沙子
    // 3. 记录是否同时接触左右边界
    // 4. 返回符合消除条件的沙子组
}
```

## 🎯 游戏特色

### 与传统俄罗斯方块的区别
1. **动态地形**：沙子会自然流动和重新分布，地形不再是静态的
2. **创新消除**：不再是消除整行，而是消除连通的同色区域
3. **物理真实感**：每个沙粒都遵循真实的物理规律
4. **策略深度**：需要考虑沙子的流动方向来制定策略

### 游戏策略提示
- 利用沙子的流动特性，让同色沙子自然聚集
- 在边界附近放置方块，更容易形成跨边界连通
- 观察沙子的堆积模式，预判最佳放置位置
- 合理利用不同颜色的搭配，避免过早触发消除

## 📝 开发说明

本项目是对经典游戏SandBlocks的JavaScript重制版。

### 项目结构
```
/
├── index.html          # 游戏主页面
├── js/
│   ├── game.js         # 游戏主控制器
│   ├── sand.js         # 沙子物理系统
│   ├── tetris.js       # 方块系统
│   └── ui.js           # 用户界面控制
└── README.md           # 项目说明文档
```

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进游戏！

### 可能的改进方向
- 添加音效和背景音乐
- 实现更多视觉特效
- 添加难度等级系统
- 支持多人对战模式
- 添加成就系统

---

**享受这个独特的沙子俄罗斯方块体验吧！** 🎮✨